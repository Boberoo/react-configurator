(this.webpackJsonpconfigurator=this.webpackJsonpconfigurator||[]).push([[0],{11:function(e,t,_){"use strict";(function(e){var r=_(2),a=_(1),n=_(4),s=_(7),i=_(6),o=_(5),c=_(12),u=_(8),l=_(0),d=function(t){Object(i.a)(u,t);var _=Object(o.a)(u);function u(e){var t;return Object(n.a)(this,u),(t=_.call(this,e)).getVolume=function(){var e=t.state.quote;return e?e.width*e.length*e.height:0},t.getExtPrice=function(e){return e.selling_price_per?e.quantity*e.selling_price/e.selling_price_per:e.quantity*e.selling_price},t.getTotalExcl=function(){var e=t.state.quote;return e?e.quote_lines.reduce((function(e,_){return e+t.getExtPrice(_)}),0):0},t.handleQuoteMasterChange=function(e){var _=e.target.name,n=e.target.value,s=Object(a.a)(Object(a.a)({},t.state.quote),{},Object(r.a)({},_,n));t.setState((function(){return{quote:s}}))},t.DoPriceChanged=function(e,_){var r=t.state,a=(r.error,r.isLoaded),n=r.quote;a&&n&&(t.state.quote.quote_lines[e].selling_price=_)},t.submitQuote=function(e){e.preventDefault(),t.saveQuote(t.state.quote)},t.renderQuoteDetails=function(e){return Object(l.jsx)("ul",{children:e.quote_lines.map((function(_,r){return Object(l.jsxs)("li",{children:[_.quantity,"x ",_.stock_code," ",_.description," ",Object(l.jsx)(c.a,Object(a.a)(Object(a.a)(Object(a.a)({},e),_),{},{lineindex:r,OnPriceChanged:t.DoPriceChanged,credentials:t.props.credentials}))]},_.line_no)}))})},t.renderQuoteMaster=function(){var e=t.state,_=e.error,r=e.isLoaded,a=e.quote;return _?Object(l.jsxs)("h2",{children:["Error: ",_]}):r?a?Object(l.jsxs)("div",{children:[Object(l.jsx)("span",{className:"form-group",children:Object(l.jsxs)("label",{children:["Select the build type:",Object(l.jsxs)("select",{name:"build_type",value:a.build_type,onChange:t.handleQuoteMasterChange,children:[Object(l.jsx)("option",{value:"Semi-Rigid",children:"Semi-Rigid"}),Object(l.jsx)("option",{value:"Trailer",children:"Trailer"}),Object(l.jsx)("option",{value:"Repair",children:"Repair"}),Object(l.jsx)("option",{value:"Parts",children:"Parts"})]})]})}),Object(l.jsx)("span",{className:"form-group",children:Object(l.jsxs)("label",{children:[" Length:",Object(l.jsx)("input",{type:"number",name:"length",value:a.length,onChange:t.handleQuoteMasterChange})]})}),Object(l.jsx)("span",{className:"form-group",children:Object(l.jsxs)("label",{children:[" Width:",Object(l.jsx)("input",{type:"number",name:"width",value:a.width,onChange:t.handleQuoteMasterChange})]})}),Object(l.jsx)("span",{className:"form-group",children:Object(l.jsxs)("label",{children:[" Height:",Object(l.jsx)("input",{type:"number",name:"height",value:a.height,onChange:t.handleQuoteMasterChange})]})}),Object(l.jsxs)("p",{children:["Volume: ",t.getVolume()+" cubic metres"]}),t.renderQuoteDetails(a),Object(l.jsxs)("p",{className:"grand-total",children:["Total: ",t.getTotalExcl().toLocaleString(void 0,{maximumFractionDigits:2})]}),Object(l.jsx)("p",{id:"statusmessage",children:t.state.statusmessage})]}):Object(l.jsx)("h2",{children:"Loading.."}):Object(l.jsx)("div",{children:"Loading..."})},t.state=Object(a.a)(Object(a.a)({},t.state),{},{quote:null}),t}return Object(s.a)(u,[{key:"loadQuote",value:function(){var t=this,_=this.state.baseUrl+"/Quote/"+this.props.reference+"?CompanyName="+this.state.companyName;console.log(_);var r=new Headers;r.set("Authorization","Basic "+e.from(this.state.userName+":"+this.state.password).toString("base64")),fetch(_,{method:"GET",headers:r}).then((function(e){return e.ok?e.json():e.text().then((function(e){throw e}))})).then((function(e){t.setState({isLoaded:!0,quote:e.quote})}),(function(e){console.log(e),t.setState({isLoaded:!0,error:e})}))}},{key:"saveQuote",value:function(e){var t=this,_={method:"PUT",headers:{"Content-Type":"application/json"},body:'{ "quote" :  '+JSON.stringify(e)+"  }"};fetch(this.state.baseUrl+"/Quote/"+this.props.reference+"?"+this.state.credentials,_).then((function(e){return e.ok?e.text():e.text().then((function(e){throw e}))})).then((function(e){return t.setState({statusmessage:e})}),(function(e){t.setState({statusmessage:"Error: "+e})}))}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.loadQuote()}),100)}},{key:"shouldComponentUpdate",value:function(){return!0}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return document.getElementById("status").innerHTML="Updating..",null}},{key:"componentDidUpdate",value:function(){document.getElementById("status").innerHTML=""}},{key:"render",value:function(){return Object(l.jsxs)("form",{onSubmit:this.submitQuote,children:[Object(l.jsx)("h1",{children:"Enter the type and dimensions"}),Object(l.jsx)("p",{id:"status",children:this.state.status}),this.renderQuoteMaster(),Object(l.jsx)("button",{type:"submit",action:"save",children:"Save Quote"})," ",Object(l.jsx)("button",{type:"submit",action:"saveas",children:"Save As New Quote"})," ",Object(l.jsx)("button",{type:"submit",action:"saveasrev",children:"Save As Revised Quote"})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{reference:e.reference}}}]),u}(u.a);t.a=d}).call(this,_(19).Buffer)},12:function(module,__webpack_exports__,__webpack_require__){"use strict";var C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7),C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5),_Omni_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(8),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(0),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__);function ROUNDUP(e,t){return t||(t=0),Math.round((e+.499/Math.pow(10,t))*Math.pow(10,t))/Math.pow(10,t)}var RecipeDetail=function(_OmniReactComponent){Object(C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__.a)(RecipeDetail,_OmniReactComponent);var _super=Object(C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__.a)(RecipeDetail);function RecipeDetail(props){var _this;return Object(C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__.a)(this,RecipeDetail),_this=_super.call(this,props),_this.getWeight=function(){var e=_this.state.recipe;return e?e.recipe_lines.reduce((function(e,t){return e+t.ext_weight}),0):0},_this.getTotalExcl=function(){var e=_this.state.recipe;return e?e.recipe_lines.reduce((function(e,t){return e+_this.calcExtPrice(t)}),0):0},_this.handleRecipeMasterChange=function(e){var t=e.target.name,_=e.target.value,r=Object(C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},_this.state.recipe),{},Object(C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},t,_));_this.setState((function(){return{recipe:r}}))},_this.handleInputChange=function(e){var t=e.target.name,_="checkbox"===e.target.type?e.target.checked:e.target.value;_this.setState(Object(C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},t,_))},_this.calcQty=function(line){var formula=line.memo;if(!formula||""===formula)return line.quantity_required;formula=formula.replace("LM",_this.props.length),formula=formula.replace("WM",_this.props.width),formula=formula.replace("HM",_this.props.height),formula=formula.replace("L",1e3*_this.props.length),formula=formula.replace("W",1e3*_this.props.width),formula=formula.replace("H",1e3*_this.props.height);try{var qty=ROUNDUP(eval(formula),3);return console.log(formula+" = "+qty),qty}catch(err){var message="Error on formula "+formula+": "+err.message;console.log(message),document.getElementById("status").innerHTML=message}},_this.calcUnitPrice=function(e){var t=100;return"Trailer"===_this.props.build_type?t*=1.3:"Semi-Rigid"===_this.props.build_type?t*=1.5:"Parts"===_this.props.build_type&&(t*=5.5),t},_this.calcExtPrice=function(e){return _this.calcUnitPrice(e)*_this.calcQty(e)},_this.renderRecipeDetail=function(e){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("tr",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("td",{align:"Right",children:_this.calcQty(e)}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("td",{align:"Left",children:e.stock_code}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("td",{children:e.stock_description}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("td",{align:"Right",children:_this.calcExtPrice(e).toLocaleString(void 0,{maximumFractionDigits:2})})]},e.seq_no)},_this.renderRecipeDetails=function(e){var t=_this.state.expanded,_=Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("label",{children:["Expand:",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("input",{name:"expanded",type:"checkbox",checked:_this.state.expanded,onChange:_this.handleInputChange})]});return t?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("span",{children:[_,Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("table",{className:"table-center recipe-detail",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("tbody",{children:e.recipe_lines.map((function(e){return _this.renderRecipeDetail(e)}))})})]}):_},_this.renderRecipe=function(){var e=_this.state,t=e.error,_=e.isLoaded,r=e.recipe;if(t)return t.includes("does not have a recipe")?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("sup",{children:t}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("h2",{children:["Error: ",t]});if(!_)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("div",{children:"Loading..."});if(!r)return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("h2",{children:"Loading.."});var a=_this.getTotalExcl();return _this.props.OnPriceChanged&&_this.props.OnPriceChanged(_this.props.lineindex,a),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("span",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("b",{children:["Total: ",a.toLocaleString(void 0,{maximumFractionDigits:2})]}),"\xa0",_this.renderRecipeDetails(r)]})},_this.state=Object(C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)(Object(C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_1__.a)({},_this.state),{},{recipe:null,expanded:!1}),_this}return Object(C_Users_Maya_configurator_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__.a)(RecipeDetail,[{key:"loadRecipe",value:function(){var e=this;fetch(this.state.baseUrl+"/Stock Recipe/"+this.props.stock_code+"?"+this.state.credentials).then((function(e){return e.ok?e.json():e.text().then((function(e){throw e}))})).then((function(t){console.log(JSON.stringify(t)),e.setState({isLoaded:!0,recipe:t.stock_recipe})}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.loadRecipe()}),100)}},{key:"shouldComponentUpdate",value:function(){return!0}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return document.getElementById("status").innerHTML="Updating..",null}},{key:"componentDidUpdate",value:function(){document.getElementById("status").innerHTML=""}},{key:"render",value:function(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)("p",{id:"status"}),this.renderRecipe()]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{stockCode:e.stock_code}}}]),RecipeDetail}(_Omni_js__WEBPACK_IMPORTED_MODULE_6__.a);__webpack_exports__.a=RecipeDetail},17:function(e,t,_){},18:function(e,t,_){},25:function(e,t,_){"use strict";_.r(t);var r=_(3),a=_.n(r),n=_(10),s=_.n(n),i=(_(17),_.p+"static/media/logo.6ce24c58.svg"),o=(_(18),_(11)),c=_(0);function u(e,t){var _=new URLSearchParams(window.location.search).get(e);return _&&""!==_||(_=Object({NODE_ENV:"production",PUBLIC_URL:"/react-configurator",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BaseUrl:"http://web.omniaccounts.co.za:50325",REACT_APP_CompanyName:"Serco-JB",REACT_APP_Password:"tibro",REACT_APP_UserName:"Maya"}).name),_&&""!==_||(_=t),_}var l=function(){var e="UserName="+u("UserName","Guest")+"&Password="+u("Password","Dev2021")+"&CompanyName="+u("CompanyName","SA Example Company [Demo]"),t=u("RefNo","Q00008");return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)("header",{className:"App-header",children:[Object(c.jsx)("img",{src:i,className:"App-logo",alt:"logo"}),Object(c.jsxs)("div",{className:"App-name",children:[Object(c.jsx)("h1",{children:"Configurator"}),Object(c.jsx)("sup",{children:"Quote Builder"})]})]}),Object(c.jsx)(o.a,{reference:t,credentials:e})]})},d=function(e){e&&e instanceof Function&&_.e(3).then(_.bind(null,26)).then((function(t){var _=t.getCLS,r=t.getFID,a=t.getFCP,n=t.getLCP,s=t.getTTFB;_(e),r(e),a(e),n(e),s(e)}))};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(l,{})}),document.getElementById("root")),d()},8:function(e,t,_){"use strict";var r=_(4),a=_(6),n=_(5),s=_(3),i=_.n(s),o=(_(10),function(e){Object(a.a)(_,e);var t=Object(n.a)(_);function _(e){var a;Object(r.a)(this,_),(a=t.call(this,e)).getDefaultVal=function(e,t){var _=new URLSearchParams(window.location.search).get(e);return _&&""!==_||(_=Object({NODE_ENV:"production",PUBLIC_URL:"/react-configurator",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BaseUrl:"http://web.omniaccounts.co.za:50325",REACT_APP_CompanyName:"Serco-JB",REACT_APP_Password:"tibro",REACT_APP_UserName:"Maya"})["REACT_APP_"+e]),_&&""!==_||(_=t),_},a.restGet=function(e,t){};var n=a.getDefaultVal("BaseUrl","http://st.omniaccounts.co.za:55683"),s="UserName="+a.getDefaultVal("UserName","Guest")+"&Password="+a.getDefaultVal("Password","Dev2021")+"&CompanyName="+a.getDefaultVal("CompanyName","SA Example Company [Demo]");return a.state={baseUrl:n,credentials:s,userName:a.getDefaultVal("UserName","Guest"),password:a.getDefaultVal("Password","Dev2021"),companyName:a.getDefaultVal("CompanyName","SA Example Company [Demo]"),isLoaded:!1},a}return _}(i.a.Component));t.a=o}},[[25,1,2]]]);
//# sourceMappingURL=main.88c08424.chunk.js.map